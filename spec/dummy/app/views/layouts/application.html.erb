<!DOCTYPE html>
<html>
  <head>
    <title>
      <%= content_for?(:thredded_page_title) ? "#{yield(:thredded_page_title)} | Dummy App" : 'Dummy App' %>
    </title>
    <%= stylesheet_link_tag current_theme, media: 'all', 'data-turbolinks-track' => true %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>
    <%== Gravatar.prefetch_dns if content_for?(:thredded) %>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head>
  <body>
    <div class="app-container">
      <header class="app-container-header">
        <span class="app-nav-auth">
          <% if signed_in? %>
            You are <%= link_to current_user, current_user %> |
            <%= link_to 'Sign out', session_path, method: :delete %>
          <% else %>
            You are an anonymous visitor |
            <%= link_to 'Sign in', sessions_new_path %>
          <% end %>
        </span>
        <a class="app-nav-logo" href="/">Thredded: Example App</a>
        <span class="app-nav-theme">
          Theme:
          <ul>
            <% themes.each do |theme| %>
              <%= content_tag :li, theme.humanize, class: ('app-current-theme' if theme == current_theme),
                              'data-theme' => theme -%>
            <% end %>
          </ul>
        </span>
      </header>

      <% unless content_for?(:thredded)  # thredded already renders the flash messages  %>
        <% [:info, :error, :notice, :alert, :warning].each do |key| %>
          <% if flash[key] %>
            <div class="<%= key %>" id="flash">
              <%= flash[key] %>
            </div>
          <% end %>
        <% end %>
      <% end %>

      <%= yield %>
    </div>
  </body>
</html>
